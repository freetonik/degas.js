<html>
<head>
<title>Evolution</title>

<script src="degas/degas.js"></script>
<script>
//
//  THIS IS AN EXAMPLE WEB PAGE FOR DEGAS
//
// create worker
var worker = new Worker('evolve.js');
// web worker sent message
worker.addEventListener('message', function(message) {
	var receivedObject;
	try {
		receivedObject = JSON.parse(message.data);
	} catch (err) {
		degas.errorHandler("Error while parsing JSON from web worker: " + err);
	}
	
	switch (receivedObject.messageType) {
		case (degas.consts.workerMessage['LOG']):
			console.log(message.logMessage);
			break;
		case (degas.consts.workerMessage['ERROR']):
			degas.errorHandler(receivedObject.data);
			break;
		case (degas.consts.workerMessage['UI_UPDATE']):
			updateUI(receivedObject);
			break;
		case (degas.consts.workerMessage['BEST_INDIVIDUAL']):
			sendCandidateToServer(receivedObject);
			break;
		default:
			degas.errorHandler("unknown message received from webworker");
	}
    
}, false);

function updateUI(receivedObject){
	document.getElementById('latest_result').textContent = receivedObject.generation + ":" + receivedObject.fitness;
};

function sendCandidateToServer(receivedObject){
	receivedObject.messageType = degas.consts.clientMessage['BEST_INDIVIDUAL'];
	client.send(receivedObject);
};



var client = new wsClient("localhost", "8080");

</script>

</head>
<body>
<h1>Evolution</h1>
<p id="latest_result">none</p>
</body>
</html> 
